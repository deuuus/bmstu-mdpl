SSEG SEGMENT PARA STACK 'STACK'
	DB 100 DUP (0)
SSEG ENDS

DSEG SEGMENT PARA 'DATA'
	ROW_MSG DB 'ENTER NUM OF ROWS: $'
	COL_MSG DB 'ENTER NUM OF COLS: $'
	MTRX_MSG DB 'ENTER MATRIX ELEMS: $'
	RES_MSG DB 'RESULT: $'
	ROWS DB 0
	COLS DB 0
	DECR DW 0
	MATRIX DB 9 * 9 DUP (0)

DSEG ENDS

CSEG SEGMENT PARA 'CODE'
	ASSUME CS:CSEG, DS:DSEG, SS:SSEG
	
INPUT_DIGIT:
	MOV AH, 1h
	INT 21h
	SUB AL, 48
	RET
	
OUTPUT_DIGIT:
	ADD DL, 48
	MOV AH, 2h
	INT 21h
	RET
	
CRLF:
	MOV AH, 2h
	MOV DL, 13
	INT 21h
	MOV DL, 10
	INT 21h
	RET
	
PRINT_SPACE:
	MOV AH, 2h
	MOV DL, 32
	INT 21h
	RET
	
MAIN:
	MOV AX, DSEG
	MOV DS, AX
	
	MOV AH, 9h
	MOV DX, OFFSET ROW_MSG
	INT 21H
	CALL CRLF
	
	CALL INPUT_DIGIT
	MOV ROWS, AL
	CALL CRLF
	
	MOV AH, 9h
	MOV DX, OFFSET COL_MSG
	INT 21H
	CALL CRLF
	
	CALL INPUT_DIGIT
	MOV COLS, AL
	CALL CRLF
	
	MOV AH, 9h
	MOV DX, OFFSET MTRX_MSG
	INT 21H
	CALL CRLF

	MOV BX, 0
	MOV CL, ROWS
	INPUT_MTRX:
		MOV CL, COLS
		INPUT_ROW:
			CALL INPUT_DIGIT
			MOV MATRIX[BX], AL
			INC BX
			CALL PRINT_SPACE
			LOOP INPUT_ROW
		CALL CRLF
		MOV CL, ROWS
		MOV SI, DECR
		SUB CX, SI
		INC DECR
		LOOP INPUT_MTRX
		
	CALL CRLF
	
	MOV AH, 9h
	MOV DX, OFFSET RES_MSG
	INT 21H
	CALL CRLF
	
	MOV DECR, 0
	MOV BX, 0
	MOV CL, ROWS
	OUTPUT_MTRX:
		MOV CL, COLS
		OUTPUT_ROW:
			MOV DL, MATRIX[BX]
			CALL OUTPUT_DIGIT
			INC BX
			CALL PRINT_SPACE
			LOOP OUTPUT_ROW
		CALL CRLF
		MOV CL, ROWS
		MOV SI, DECR
		SUB CX, SI
		INC DECR
		LOOP OUTPUT_MTRX
		
	MOV AX, 4C00h
	INT 21h

CSEG ENDS
END MAIN
	